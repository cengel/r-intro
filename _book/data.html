<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Working with tabular data in R | Introduction to R</title>
  <meta name="description" content="Workshop materials for Intro to R" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Working with tabular data in R | Introduction to R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Workshop materials for Intro to R" />
  <meta name="github-repo" content="cengel/R-intro" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Working with tabular data in R | Introduction to R" />
  
  <meta name="twitter:description" content="Workshop materials for Intro to R" />
  

<meta name="author" content="Claudia A Engel" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="gettingstarted.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prerequisites</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#setup-instructions"><i class="fa fa-check"></i>Setup Instructions</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#macos"><i class="fa fa-check"></i>macOS</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#windows"><i class="fa fa-check"></i>Windows</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#linux"><i class="fa fa-check"></i>Linux</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="backgroud.html"><a href="backgroud.html"><i class="fa fa-check"></i><b>1</b> R and Rstudio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="backgroud.html"><a href="backgroud.html#what-is-r-what-is-rstudio"><i class="fa fa-check"></i><b>1.1</b> What is R? What is RStudio?</a></li>
<li class="chapter" data-level="1.2" data-path="backgroud.html"><a href="backgroud.html#why-learn-r"><i class="fa fa-check"></i><b>1.2</b> Why learn R?</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="backgroud.html"><a href="backgroud.html#r-does-not-involve-lots-of-pointing-and-clicking-and-thats-a-good-thing"><i class="fa fa-check"></i><b>1.2.1</b> R does not involve lots of pointing and clicking, and that’s a good thing</a></li>
<li class="chapter" data-level="1.2.2" data-path="backgroud.html"><a href="backgroud.html#r-code-is-great-for-reproducibility"><i class="fa fa-check"></i><b>1.2.2</b> R code is great for reproducibility</a></li>
<li class="chapter" data-level="1.2.3" data-path="backgroud.html"><a href="backgroud.html#r-is-multidisciplinary-extensible-and-popular"><i class="fa fa-check"></i><b>1.2.3</b> R is multidisciplinary, extensible, and popular</a></li>
<li class="chapter" data-level="1.2.4" data-path="backgroud.html"><a href="backgroud.html#r-works-on-data-of-all-shapes-and-sizes"><i class="fa fa-check"></i><b>1.2.4</b> R works on data of all shapes and sizes</a></li>
<li class="chapter" data-level="1.2.5" data-path="backgroud.html"><a href="backgroud.html#r-produces-high-quality-graphics"><i class="fa fa-check"></i><b>1.2.5</b> R produces high-quality graphics</a></li>
<li class="chapter" data-level="1.2.6" data-path="backgroud.html"><a href="backgroud.html#r-has-a-large-user-community"><i class="fa fa-check"></i><b>1.2.6</b> R has a large user community</a></li>
<li class="chapter" data-level="1.2.7" data-path="backgroud.html"><a href="backgroud.html#not-only-is-r-free-but-it-is-also-open-source-and-cross-platform"><i class="fa fa-check"></i><b>1.2.7</b> Not only is R free, but it is also open-source and cross-platform</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="backgroud.html"><a href="backgroud.html#knowing-your-way-around-rstudio"><i class="fa fa-check"></i><b>1.3</b> Knowing your way around RStudio</a></li>
<li class="chapter" data-level="1.4" data-path="backgroud.html"><a href="backgroud.html#how-to-start-an-r-project"><i class="fa fa-check"></i><b>1.4</b> How to start an R project</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="backgroud.html"><a href="backgroud.html#the-working-directory"><i class="fa fa-check"></i><b>1.4.1</b> The working directory</a></li>
<li class="chapter" data-level="1.4.2" data-path="backgroud.html"><a href="backgroud.html#organizing-your-working-directory"><i class="fa fa-check"></i><b>1.4.2</b> Organizing your working directory</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="backgroud.html"><a href="backgroud.html#interacting-with-r"><i class="fa fa-check"></i><b>1.5</b> Interacting with R</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="backgroud.html"><a href="backgroud.html#rstudio-console-and-command-prompt"><i class="fa fa-check"></i><b>1.5.1</b> RStudio Console and Command Prompt</a></li>
<li class="chapter" data-level="1.5.2" data-path="backgroud.html"><a href="backgroud.html#rstudio-script-editor"><i class="fa fa-check"></i><b>1.5.2</b> RStudio Script Editor</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="gettingstarted.html"><a href="gettingstarted.html"><i class="fa fa-check"></i><b>2</b> Getting Started with R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="gettingstarted.html"><a href="gettingstarted.html#creating-objects-in-r"><i class="fa fa-check"></i><b>2.1</b> Creating objects in R</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="gettingstarted.html"><a href="gettingstarted.html#comments"><i class="fa fa-check"></i><b>2.1.1</b> Comments</a></li>
<li class="chapter" data-level="2.1.2" data-path="gettingstarted.html"><a href="gettingstarted.html#functions-and-their-arguments"><i class="fa fa-check"></i><b>2.1.2</b> Functions and their arguments</a></li>
<li class="chapter" data-level="2.1.3" data-path="gettingstarted.html"><a href="gettingstarted.html#objects-vs.-variables"><i class="fa fa-check"></i><b>2.1.3</b> Objects vs. variables</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="gettingstarted.html"><a href="gettingstarted.html#vectors-and-data-types"><i class="fa fa-check"></i><b>2.2</b> Vectors and data types</a></li>
<li class="chapter" data-level="2.3" data-path="gettingstarted.html"><a href="gettingstarted.html#subsetting-vectors"><i class="fa fa-check"></i><b>2.3</b> Subsetting vectors</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="gettingstarted.html"><a href="gettingstarted.html#conditional-subsetting"><i class="fa fa-check"></i><b>2.3.1</b> Conditional subsetting</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="gettingstarted.html"><a href="gettingstarted.html#missing-data"><i class="fa fa-check"></i><b>2.4</b> Missing data</a></li>
<li class="chapter" data-level="2.5" data-path="gettingstarted.html"><a href="gettingstarted.html#common-r-data-structures"><i class="fa fa-check"></i><b>2.5</b> Common R Data Structures</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="gettingstarted.html"><a href="gettingstarted.html#matrix"><i class="fa fa-check"></i><b>2.5.1</b> Matrix</a></li>
<li class="chapter" data-level="2.5.2" data-path="gettingstarted.html"><a href="gettingstarted.html#list"><i class="fa fa-check"></i><b>2.5.2</b> List</a></li>
<li class="chapter" data-level="2.5.3" data-path="gettingstarted.html"><a href="gettingstarted.html#data-frame"><i class="fa fa-check"></i><b>2.5.3</b> Data frame</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="gettingstarted.html"><a href="gettingstarted.html#extending-r-base-functionality"><i class="fa fa-check"></i><b>2.6</b> Extending R base functionality</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="gettingstarted.html"><a href="gettingstarted.html#installing-additional-packages"><i class="fa fa-check"></i><b>2.6.1</b> Installing additional packages</a></li>
<li class="chapter" data-level="2.6.2" data-path="gettingstarted.html"><a href="gettingstarted.html#make-use-of-the-installed-packages"><i class="fa fa-check"></i><b>2.6.2</b> Make use of the installed packages</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="gettingstarted.html"><a href="gettingstarted.html#seeking-help"><i class="fa fa-check"></i><b>2.7</b> Seeking help</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="gettingstarted.html"><a href="gettingstarted.html#use-the-built-in-rstudio-help-interface"><i class="fa fa-check"></i><b>2.7.1</b> Use the built-in RStudio help interface</a></li>
<li class="chapter" data-level="2.7.2" data-path="gettingstarted.html"><a href="gettingstarted.html#i-know-the-name-of-the-function-but-im-not-sure-how-to-use-it"><i class="fa fa-check"></i><b>2.7.2</b> I know the name of the function, but I’m not sure how to use it</a></li>
<li class="chapter" data-level="2.7.3" data-path="gettingstarted.html"><a href="gettingstarted.html#there-must-be-a-function-to-do-x-but-i-dont-know-which-one"><i class="fa fa-check"></i><b>2.7.3</b> There must be a function to do X but I don’t know which one…</a></li>
<li class="chapter" data-level="2.7.4" data-path="gettingstarted.html"><a href="gettingstarted.html#i-am-stuck-i-get-an-error-message-that-i-dont-understand"><i class="fa fa-check"></i><b>2.7.4</b> I am stuck… I get an error message that I don’t understand</a></li>
<li class="chapter" data-level="2.7.5" data-path="gettingstarted.html"><a href="gettingstarted.html#how-to-ask-for-help"><i class="fa fa-check"></i><b>2.7.5</b> How to ask for help</a></li>
<li class="chapter" data-level="2.7.6" data-path="gettingstarted.html"><a href="gettingstarted.html#where-to-ask-for-help"><i class="fa fa-check"></i><b>2.7.6</b> Where to ask for help?</a></li>
<li class="chapter" data-level="2.7.7" data-path="gettingstarted.html"><a href="gettingstarted.html#resources-on-getting-help"><i class="fa fa-check"></i><b>2.7.7</b> Resources on getting help</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Working with tabular data in R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html#importing-tabular-data"><i class="fa fa-check"></i><b>3.1</b> Importing tabular data</a></li>
<li class="chapter" data-level="3.2" data-path="data.html"><a href="data.html#inspecting-data-frames"><i class="fa fa-check"></i><b>3.2</b> Inspecting data frames</a></li>
<li class="chapter" data-level="3.3" data-path="data.html"><a href="data.html#indexing-and-subsetting-data-frames"><i class="fa fa-check"></i><b>3.3</b> Indexing and subsetting data frames</a></li>
<li class="chapter" data-level="3.4" data-path="data.html"><a href="data.html#conditional-subsetting-1"><i class="fa fa-check"></i><b>3.4</b> Conditional subsetting</a></li>
<li class="chapter" data-level="3.5" data-path="data.html"><a href="data.html#adding-and-removing-rows-and-columns"><i class="fa fa-check"></i><b>3.5</b> Adding and removing rows and columns</a></li>
<li class="chapter" data-level="3.6" data-path="data.html"><a href="data.html#categorical-data-factors"><i class="fa fa-check"></i><b>3.6</b> Categorical data: Factors</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="data.html"><a href="data.html#converting-factors"><i class="fa fa-check"></i><b>3.6.1</b> Converting factors</a></li>
<li class="chapter" data-level="3.6.2" data-path="data.html"><a href="data.html#renaming-factors"><i class="fa fa-check"></i><b>3.6.2</b> Renaming factors</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="data.html"><a href="data.html#date-formats"><i class="fa fa-check"></i><b>3.7</b> Date Formats</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Working with tabular data in R<a href="data.html#data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<blockquote>
<p>Learning Objectives</p>
<ul>
<li>Load external data from a .csv file into a data frame in R with <code>read_csv()</code></li>
<li>Find basic properties of a data frames including size, class or type of the columns, names of rows and columns by using <code>str()</code>, <code>nrow()</code>, <code>ncol()</code>, <code>dim()</code>, <code>length()</code> , <code>colnames()</code>, <code>rownames()</code></li>
<li>Use <code>head()</code> and <code>tail()</code> to inspect rows of a data frame.</li>
<li>Generate summary statistics for a data frame</li>
<li>Use indexing to select rows and columns</li>
<li>Use logical conditions to select rows and columns</li>
<li>Add columns and rows to a data frame</li>
<li>Manipulate categorical data with <code>factors</code>, <code>levels()</code> and <code>as.character()</code></li>
<li>Change how character strings are handled in a data frame.</li>
<li>Format dates in R and calculate time differences</li>
<li>Use <code>df$new_col &lt;- new_col</code> to add a new column to a data frame.</li>
<li>Use <code>cbind()</code> to add a new column to a data frame.</li>
<li>Use <code>rbind()</code> to add a new row to a data frame.</li>
<li>Use <code>na.omit()</code> to remove rows from a data frame with <code>NA</code> values.</li>
</ul>
</blockquote>
<hr />
<p>Data frames are the de facto data structure for tabular data in R, and what we use for data processing, statistics, and plotting.</p>
<p>A data frame is the representation of data in the format of a table where the columns are vectors that all have the same length. Data frames are analogous to the more familiar spreadsheet in programs such as Excel, with one key difference. Because columns are vectors, each column must contain a single type of data (e.g., characters, integers, factors). For example, here is a figure depicting a data frame comprising a numeric, a character, and a logical vector.</p>
<div class="figure"><span style="display:block;" id="fig:data-frame"></span>
<img src="img/data-frame.png" alt="Structure of a data frame" width="80%" />
<p class="caption">
Figure 3.1: Structure of a data frame
</p>
</div>
<p>As we have seen above, data frames can be created by hand, but most commonly they are generated by the functions like <code>read.csv()</code>, <code>read_csv()</code> or <code>read_table()</code> and others. These functions essentiallly import the tables or spreadsheets from your hard drive (or the web). We will now demonstrate how to import tabular data using <code>read_csv()</code>.</p>
<div id="importing-tabular-data" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Importing tabular data<a href="data.html#importing-tabular-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We will take a CSV file as example. <a href="https://support.bigcommerce.com/articles/Public/What-is-a-CSV-file-and-how-do-I-save-my-spreadsheet-as-one">What is a CSV file?</a></p>
<p>You may know about <a href="https://openpolicing.stanford.edu">the Stanford Open Policing Project</a> and we will be working with a sample dataset from their repository (<a href="https://openpolicing.stanford.edu/data/" class="uri">https://openpolicing.stanford.edu/data/</a>). The sample I extracted contains information about traffic stops for black and white drivers in the state of Mississippi during January 2013 to mid-July of 2016.</p>
<p>First, we are going to use the R function <code>download.file()</code> to download the CSV file
that contains the traffic stop data, and we will use <code>read.csv()</code> to
load into memory the content of the CSV file as an object of class <code>data.frame</code>.</p>
<p>To download the data into your local <code>data/</code> subdirectory, run the following:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="data.html#cb103-1" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">&quot;http://bit.ly/MS_trafficstops_bw&quot;</span>, <span class="st">&quot;data/MS_trafficstops_bw.csv&quot;</span>)</span></code></pre></div>
<p>You are going to load the data in R’s memory using the function <code>read_csv()</code> from the <code>readr</code> package, which is part of the <code>tidyverse</code>; learn more about the tidyverse collection of packages (here)[<a href="https://www.tidyverse.org/" class="uri">https://www.tidyverse.org/</a>]. <code>readr</code> gets installed as part as the <code>tidyverse</code> installation. When you load the <code>tidyverse</code> (<code>library(tidyverse)</code>), the core packages (the packages used in most data analyses) get loaded, including <code>readr.</code></p>
<p>So lets make sure you have the <code>tidyverse</code> packages installed and loaded.</p>
<p>If you haven’t done so already run the installation of <code>tidyverse</code> like this:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="data.html#cb104-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span> , <span class="at">dependencies =</span> <span class="cn">TRUE</span>) <span class="co"># this is only necessary once</span></span></code></pre></div>
<p>Then load <code>tidyverse</code> into memory like this:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="data.html#cb105-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># do this whenever you need to access functions from the tidyverse packages </span></span></code></pre></div>
<p>You may have noticed that when you loaded the tidyverse package that you received the following message:</p>
<p><code>── Conflicts ─────────────────────────────────────── tidyverse_conflicts() ──</code>
<code>✖ dplyr::filter() masks stats::filter()</code>
<code>✖ dplyr::lag()    masks stats::lag()</code>
<code>ℹ Use the conflicted package to force all conflicts to become errors</code></p>
<p>This presents a good opportunity to talk about conflicts. Certain packages we load can end up introducing function names that are already in use by pre-loaded R packages. For instance, when we load the <code>tidyverse</code> package below, we will introduce two conflicting functions: <code>filter()</code> and <code>lag()</code>. This happens because <code>filter</code> and <code>lag</code> are already functions used by the <code>stats</code> package (already pre-loaded in R). What will happen now is that if we, for example, call the <code>filter()</code> function, R will use the <code>dplyr::filter()</code> version and not the <code>stats::filter()</code> one. This happens because, if conflicted, <strong>by default R uses the function from the most recently loaded package</strong>. Conflicted functions may cause you some trouble in the future, so it is important that we are aware of them so that we can properly handle them, if we want.</p>
<p>To do so, we can use the following functions from the conflicted package:</p>
<ul>
<li><code>conflicted::conflict_scout()</code>: Shows us any conflicted functions.</li>
<li><code>conflict_prefer("function", "package_prefered")</code>: Allows us to choose the default function we want from now on.</li>
</ul>
<p>It is also important to know that we can, at any time, just call the function directly from the package we want, such as <code>stats::filter()</code>.</p>
<p>Ok. With that out of the way you are now ready to load the data.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="data.html#cb106-1" tabindex="-1"></a>stops <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/MS_trafficstops_bw.csv&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; Rows: 211211 Columns: 11
#&gt; ── Column specification ────────────────────────────────────────────────────────
#&gt; Delimiter: &quot;,&quot;
#&gt; chr  (8): id, state, county_name, police_department, driver_gender, driver_r...
#&gt; dbl  (1): county_fips
#&gt; date (2): stop_date, driver_birthdate
#&gt; 
#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.
#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<p>If you were to type in the code above, it is likely that the <code>read.csv()</code> (note the dot!) function would appear in the automatically populated list of functions. This function is different from the <code>read_csv()</code> (note the underscore!) function, as it is included in the “base” packages that come pre-installed with R. Overall, <code>read.csv()</code> behaves similar to <code>read_csv()</code>, with a few notable differences. First, <code>read.csv()</code> coerces column names with spaces and/or special characters to different names (e.g. interview date becomes interview.date). Second, <code>read.csv()</code> stores data as a <strong>data.frame</strong>, where <code>read_csv()</code> stores data as a <strong>tibble</strong>. We prefer tibbles because they have nice printing properties among other desirable qualities. Read more about tibbles <a href="https://tibble.tidyverse.org/">here.</a></p>
<p>The second statement in the code above creates a data frame but doesn’t output any data because, as you might recall, assignments (<code>&lt;-</code>) don’t display anything. (Note, however, that <code>read_csv</code> may show informational text about the data frame that is created.)</p>
<p>So let’s check out the data! We can type the name of the object <code>stops</code>:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="data.html#cb108-1" tabindex="-1"></a>stops</span></code></pre></div>
<pre><code>#&gt; # A tibble: 211,211 × 11
#&gt;    id            state stop_date  county_name      county_fips police_department
#&gt;    &lt;chr&gt;         &lt;chr&gt; &lt;date&gt;     &lt;chr&gt;                  &lt;dbl&gt; &lt;chr&gt;            
#&gt;  1 MS-2013-00001 MS    2013-01-01 Jones County           28067 Mississippi High…
#&gt;  2 MS-2013-00002 MS    2013-01-01 Lauderdale Coun…       28075 Mississippi High…
#&gt;  3 MS-2013-00003 MS    2013-01-01 Pike County            28113 Mississippi High…
#&gt;  4 MS-2013-00004 MS    2013-01-01 Hancock County         28045 Mississippi High…
#&gt;  5 MS-2013-00005 MS    2013-01-01 Holmes County          28051 Mississippi High…
#&gt;  6 MS-2013-00006 MS    2013-01-01 Jackson County         28059 Mississippi High…
#&gt;  7 MS-2013-00007 MS    2013-01-01 Jackson County         28059 Mississippi High…
#&gt;  8 MS-2013-00008 MS    2013-01-01 Grenada County         28043 Mississippi High…
#&gt;  9 MS-2013-00009 MS    2013-01-01 Holmes County          28051 Mississippi High…
#&gt; 10 MS-2013-00010 MS    2013-01-01 Holmes County          28051 Mississippi High…
#&gt; # ℹ 211,201 more rows
#&gt; # ℹ 5 more variables: driver_gender &lt;chr&gt;, driver_birthdate &lt;date&gt;,
#&gt; #   driver_race &lt;chr&gt;, violation_raw &lt;chr&gt;, officer_id &lt;chr&gt;</code></pre>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="data.html#cb110-1" tabindex="-1"></a><span class="do">## Try also:</span></span>
<span id="cb110-2"><a href="data.html#cb110-2" tabindex="-1"></a><span class="co"># head(stops)</span></span>
<span id="cb110-3"><a href="data.html#cb110-3" tabindex="-1"></a><span class="co"># view(stops)</span></span></code></pre></div>
<p><code>read_csv()</code> assumes that fields are delimited by commas. For other delimiters (like semicolon or tab) check out the help: <code>?read_csv</code></p>
<p>Note that <code>read_csv()</code> loads the data as a so called “tibble”. A tibble is an extended form of R data frames (as an object of multiple classes <code>tbl_df</code>, <code>tbl</code>, and <code>data.frame</code>). This may sound confusing, but it is really not anything you typically need to deal with when working the data. In fact, it makes it a little more convenient.</p>
<p>As you may recall, a data frame in R is a special case of a list, and a representation of data where the columns are vectors that all have the same length. Because the columns are vectors, they all contain the same type of data (e.g., characters, integers, factors, etc.).</p>
<p>In this tibble you can see the type of data included in each column listed in an abbreviated fashion right below the column names. For instance, the <code>state</code> column is is of type character <code>&lt;chr&gt;</code>, the <code>stop_date</code> is in <code>&lt;date&gt;</code> format and <code>county_fips</code> are floating point numbers (abbreviated <code>&lt;dbl&gt;</code> for the word ‘double’).</p>
</div>
<div id="inspecting-data-frames" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Inspecting data frames<a href="data.html#inspecting-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>When calling a <code>tbl_df</code>object (like <code>stops</code> here), there is already a lot of information about our data frame being displayed such as the number of rows, the number of columns, the names of the columns, and as we just saw the class of data stored in each column. However, there are additional functions to extract this information from data frames. Here is a non-exhaustive list of some of these functions. Let’s try them out!</p>
<p>We already saw how the functions <code>head()</code> and <code>str()</code> can be useful to check the
content and the structure of a data frame. Here is a non-exhaustive list of
functions to get a sense of the content/structure of the data. Let’s try them out!</p>
<p>(Note: most of these functions are “generic”, they can be used on other types of
objects besides data frames or tibbles.)</p>
<ul>
<li>Summary:
<ul>
<li><code>str(stops)</code> - structure of the object and information about the class, length and
content of each column</li>
<li><code>summary(stops)</code> - summary statistics for each column</li>
<li><code>glimpse(stops)</code> - returns the number of columns and rows of the tibble, the names and class of each column, and previews as many values will fit on the screen. Unlike the other inspecting functions listed above, <code>glimpse()</code> is not a ‘base R’ function so you need to have the <code>dplyr</code> or <code>tibble</code> packages loaded to be able to execute it.</li>
</ul></li>
<li>Size:
<ul>
<li><code>dim(stops)</code> - returns a vector with the number of rows in the first element,
and the number of columns as the second element (the <strong>dim</strong>ensions of
the object)</li>
<li><code>nrow(stops)</code> - returns the number of rows</li>
<li><code>ncol(stops)</code> - returns the number of columns</li>
<li><code>length(stops)</code> - returns number of columns</li>
</ul></li>
<li>Content:
<ul>
<li><code>head(stops)</code> - shows the first 6 rows</li>
<li><code>tail(stops)</code> - shows the last 6 rows</li>
</ul></li>
<li>Names:
<ul>
<li><code>names(stops)</code> - returns the column names (synonym of <code>colnames()</code> for <code>data.frame</code>
objects)</li>
<li><code>rownames(stops)</code> - returns the row names</li>
</ul></li>
</ul>
<blockquote>
<h3>
Challenge
</h3>
<p>Based on the output of <code>str(stops)</code>, can you answer the following questions?</p>
<ul>
<li>What is the class of the object <code>stops</code>?</li>
<li>How many rows and how many columns are in this object?</li>
<li>How many counties have been recorded in this dataset?</li>
</ul>
</blockquote>
<!---

--->
</div>
<div id="indexing-and-subsetting-data-frames" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Indexing and subsetting data frames<a href="data.html#indexing-and-subsetting-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Our stops data frame has rows and columns (it has 2 dimensions), if we want to
extract some specific data from it, we need to specify the “coordinates” (i.e., indices) we want from it. Row numbers come first, followed by column numbers.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="data.html#cb111-1" tabindex="-1"></a><span class="do">## first element in the first column of the tibble</span></span>
<span id="cb111-2"><a href="data.html#cb111-2" tabindex="-1"></a>stops[<span class="dv">1</span>, <span class="dv">1</span>]</span>
<span id="cb111-3"><a href="data.html#cb111-3" tabindex="-1"></a><span class="do">## first element in the 6th column of the tibble </span></span>
<span id="cb111-4"><a href="data.html#cb111-4" tabindex="-1"></a>stops[<span class="dv">1</span>, <span class="dv">6</span>]</span>
<span id="cb111-5"><a href="data.html#cb111-5" tabindex="-1"></a><span class="do">## first column of the tibble</span></span>
<span id="cb111-6"><a href="data.html#cb111-6" tabindex="-1"></a>stops[<span class="dv">1</span>]</span>
<span id="cb111-7"><a href="data.html#cb111-7" tabindex="-1"></a><span class="do">## first column of the tibble (as a vector)</span></span>
<span id="cb111-8"><a href="data.html#cb111-8" tabindex="-1"></a>stops[[<span class="dv">1</span>]]</span>
<span id="cb111-9"><a href="data.html#cb111-9" tabindex="-1"></a></span>
<span id="cb111-10"><a href="data.html#cb111-10" tabindex="-1"></a><span class="do">## the 3rd row of the tibble</span></span>
<span id="cb111-11"><a href="data.html#cb111-11" tabindex="-1"></a>stops[<span class="dv">3</span>, ]</span>
<span id="cb111-12"><a href="data.html#cb111-12" tabindex="-1"></a><span class="do">## first three elements in the 7th column of the tibble</span></span>
<span id="cb111-13"><a href="data.html#cb111-13" tabindex="-1"></a>stops[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">7</span>]</span>
<span id="cb111-14"><a href="data.html#cb111-14" tabindex="-1"></a><span class="do">## equivalent to head(stops) </span></span>
<span id="cb111-15"><a href="data.html#cb111-15" tabindex="-1"></a>stops[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, ]</span>
<span id="cb111-16"><a href="data.html#cb111-16" tabindex="-1"></a></span>
<span id="cb111-17"><a href="data.html#cb111-17" tabindex="-1"></a><span class="do">## Excludig with &#39;-&#39;</span></span>
<span id="cb111-18"><a href="data.html#cb111-18" tabindex="-1"></a><span class="do">## The whole tibble, except the first column</span></span>
<span id="cb111-19"><a href="data.html#cb111-19" tabindex="-1"></a>stops[, <span class="sc">-</span><span class="dv">1</span>]          </span>
<span id="cb111-20"><a href="data.html#cb111-20" tabindex="-1"></a><span class="do">## equivalent to head(stops)  </span></span>
<span id="cb111-21"><a href="data.html#cb111-21" tabindex="-1"></a>stops[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">7</span><span class="sc">:</span><span class="fu">nrow</span>(stops)),]</span></code></pre></div>
<p>Subsetting a <code>tibble</code> with <code>[</code> always results in a tibble. However, note that different ways of specifying these coordinates lead to results with different classes. Below are some example for <code>data.frame</code> objects.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="data.html#cb112-1" tabindex="-1"></a>stops_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(stops)</span>
<span id="cb112-2"><a href="data.html#cb112-2" tabindex="-1"></a>stops_df[<span class="dv">1</span>, <span class="dv">1</span>]   <span class="co"># first element in the first column of the data frame (as a vector)</span></span>
<span id="cb112-3"><a href="data.html#cb112-3" tabindex="-1"></a>stops_df[, <span class="dv">1</span>]    <span class="co"># first column in the data frame (as a vector)</span></span>
<span id="cb112-4"><a href="data.html#cb112-4" tabindex="-1"></a>stops_df[<span class="dv">1</span>]      <span class="co"># first column in the data frame (as a data.frame)</span></span></code></pre></div>
<p>An alternative to subsetting <code>tibbles</code> (and data frames) is to calling their column names directly.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="data.html#cb113-1" tabindex="-1"></a>stops[<span class="st">&quot;violation_raw&quot;</span>]       <span class="co"># Result is a tibble</span></span>
<span id="cb113-2"><a href="data.html#cb113-2" tabindex="-1"></a>stops[, <span class="st">&quot;violation_raw&quot;</span>]     <span class="co"># Result is a tibble</span></span>
<span id="cb113-3"><a href="data.html#cb113-3" tabindex="-1"></a>stops[[<span class="st">&quot;violation_raw&quot;</span>]]     <span class="co"># Result is a vector</span></span>
<span id="cb113-4"><a href="data.html#cb113-4" tabindex="-1"></a>stops<span class="sc">$</span>violation_raw          <span class="co"># Result is a vector</span></span></code></pre></div>
<p>RStudio knows about the columns in your data frame, so you can take advantage of the autocompletion feature to get the full and correct column name.</p>
<blockquote>
<h3>
Challenge
</h3>
<ol style="list-style-type: decimal">
<li><p>Create a <code>tibble</code> (<code>stops_200</code>) containing only the observations from
row 200 of the <code>stops</code> dataset.</p></li>
<li><p>Notice how <code>nrow()</code> gave you the number of rows in a <code>tibble</code>?</p>
<ul>
<li>Use that number to pull out just that last row in the data frame.</li>
<li>Compare that with what you see as the last row using <code>tail()</code> to make
sure it’s meeting expectations.</li>
<li>Pull out that last row using <code>nrow()</code> instead of the row number.</li>
<li>Create a new data frame object (<code>stops_last</code>) from that last row.</li>
</ul></li>
<li><p>Use <code>nrow()</code> to extract the row that is in the middle of the data
frame. Store the content of this row in an object named <code>stops_middle</code>.</p></li>
<li><p>Combine <code>nrow()</code> with the <code>-</code> notation above to reproduce the behavior of
<code>head(stops)</code> keeping just the first through 6th rows of the stops
dataset.</p></li>
</ol>
</blockquote>
<!---

```r
## Answers
stops_200 <- stops[200, ]
stops_last <- stops[nrow(stops), ]
stops_head <- stops[-c(7:nrow(stops)),]
```
--->
</div>
<div id="conditional-subsetting-1" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Conditional subsetting<a href="data.html#conditional-subsetting-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A very common need when working with tables is the need to extract a subset of a data frame based on certain conditions, depending on the actualcontent of the table. For example, we may want to look only at traffic stops in Webster County. In this case we can use logical conditions, exactly like we did above with vector subsetting. In base R this can be done like this:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="data.html#cb114-1" tabindex="-1"></a><span class="co"># the condition:</span></span>
<span id="cb114-2"><a href="data.html#cb114-2" tabindex="-1"></a><span class="co"># returns a logical vector of the length of the column</span></span>
<span id="cb114-3"><a href="data.html#cb114-3" tabindex="-1"></a>stops<span class="sc">$</span>county_name <span class="sc">==</span> <span class="st">&quot;Webster County&quot;</span> </span>
<span id="cb114-4"><a href="data.html#cb114-4" tabindex="-1"></a></span>
<span id="cb114-5"><a href="data.html#cb114-5" tabindex="-1"></a><span class="co"># use this vector to extract rows and all columns</span></span>
<span id="cb114-6"><a href="data.html#cb114-6" tabindex="-1"></a><span class="co"># note the comma: we want *all* columns</span></span>
<span id="cb114-7"><a href="data.html#cb114-7" tabindex="-1"></a>stops[stops<span class="sc">$</span>county_name <span class="sc">==</span> <span class="st">&quot;Webster County&quot;</span>, ] </span>
<span id="cb114-8"><a href="data.html#cb114-8" tabindex="-1"></a></span>
<span id="cb114-9"><a href="data.html#cb114-9" tabindex="-1"></a><span class="co"># assign extract to a new data frame</span></span>
<span id="cb114-10"><a href="data.html#cb114-10" tabindex="-1"></a>Webster_stops <span class="ot">&lt;-</span> stops[stops<span class="sc">$</span>county_name <span class="sc">==</span> <span class="st">&quot;Webster County&quot;</span>, ]</span></code></pre></div>
<p>This is also a possibility (but slower):</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="data.html#cb115-1" tabindex="-1"></a>Webster_stops <span class="ot">&lt;-</span> <span class="fu">subset</span>(stops, county_name <span class="sc">==</span> <span class="st">&quot;Webster County&quot;</span>)</span>
<span id="cb115-2"><a href="data.html#cb115-2" tabindex="-1"></a><span class="fu">nrow</span>(Webster_stops) <span class="co"># 393 stops in Webster County!</span></span></code></pre></div>
<pre><code>#&gt; [1] 156</code></pre>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="data.html#cb117-1" tabindex="-1"></a><span class="co"># and if we wanted to see the breakdown by race:</span></span>
<span id="cb117-2"><a href="data.html#cb117-2" tabindex="-1"></a><span class="fu">table</span>(Webster_stops<span class="sc">$</span>driver_race)</span></code></pre></div>
<pre><code>#&gt; 
#&gt; Black White 
#&gt;    59    97</code></pre>
<p>These commands are from the R base package. In the R Data Wrangling workshop we will discuss a different way of subsetting using functions from the <code>tidyverse</code> package.</p>
<blockquote>
<h3>
Challenge
</h3>
<ul>
<li>Use subsetting to extract stops in Hancock, Harrison, and Jackson Counties into a separate data frame <code>coastal_counties</code>.</li>
<li>Using <code>coastal_counties</code>, count the total number of Black and White drivers in the coastal counties.</li>
<li>Bonus: Count the total number of Black and White drivers in the entire <code>stops</code> dataset. How does the ratio of Black to White stops in the three coastal counties compare to the same ratio for stops in the entire state of Mississippi?</li>
</ul>
</blockquote>
<!---

```r
## Answers
coastal_counties <- stops[stops$county_name %in% c("Hancock County", "Harrison County", "Jackson County"), ]
# or
coastal_counties <- subset(stops, county_name %in% c("Hancock County", "Harrison County", "Jackson County"))

# counts (the sum over the logical vector) 
sum(coastal_counties$driver_race == "Black")
sum(coastal_counties$driver_race == "White")

# ratios
sum(coastal_counties$driver_race == "Black")/sum(coastal_counties$driver_race == "White")

sum(stops$driver_race == "Black")/sum(stops$driver_race == "White")
```
--->
</div>
<div id="adding-and-removing-rows-and-columns" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Adding and removing rows and columns<a href="data.html#adding-and-removing-rows-and-columns" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To add a new column to the data frame we can use the <code>cbind()</code> function There also is a <code>bind_cols()</code> function from <code>dplyr</code> package (part of the <code>tidyverse</code>). An important difference with <code>bind_cols()</code> is that it displays an error message when you try to combine with vector that has fewer or more elements than the number of rows in the table. <code>cbind()</code> on the other hand, silently repeats values or rows, so you might introduce errors and be unaware of it.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="data.html#cb119-1" tabindex="-1"></a>id_column <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(stops) <span class="co"># create a unique ID number for each row</span></span>
<span id="cb119-2"><a href="data.html#cb119-2" tabindex="-1"></a>stops_with_id <span class="ot">&lt;-</span> <span class="fu">cbind</span>(stops, id_column) </span>
<span id="cb119-3"><a href="data.html#cb119-3" tabindex="-1"></a><span class="fu">glimpse</span>(stops_with_id)</span></code></pre></div>
<pre><code>#&gt; Rows: 211,211
#&gt; Columns: 12
#&gt; $ id                &lt;chr&gt; &quot;MS-2013-00001&quot;, &quot;MS-2013-00002&quot;, &quot;MS-2013-00003&quot;, &quot;…
#&gt; $ state             &lt;chr&gt; &quot;MS&quot;, &quot;MS&quot;, &quot;MS&quot;, &quot;MS&quot;, &quot;MS&quot;, &quot;MS&quot;, &quot;MS&quot;, &quot;MS&quot;, &quot;MS&quot;…
#&gt; $ stop_date         &lt;date&gt; 2013-01-01, 2013-01-01, 2013-01-01, 2013-01-01, 201…
#&gt; $ county_name       &lt;chr&gt; &quot;Jones County&quot;, &quot;Lauderdale County&quot;, &quot;Pike County&quot;, …
#&gt; $ county_fips       &lt;dbl&gt; 28067, 28075, 28113, 28045, 28051, 28059, 28059, 280…
#&gt; $ police_department &lt;chr&gt; &quot;Mississippi Highway Patrol&quot;, &quot;Mississippi Highway P…
#&gt; $ driver_gender     &lt;chr&gt; &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;M&quot;, &quot;M&quot;, &quot;M…
#&gt; $ driver_birthdate  &lt;date&gt; 1950-06-14, 1967-04-06, 1974-04-15, 1981-03-23, 199…
#&gt; $ driver_race       &lt;chr&gt; &quot;Black&quot;, &quot;Black&quot;, &quot;Black&quot;, &quot;White&quot;, &quot;White&quot;, &quot;White&quot;…
#&gt; $ violation_raw     &lt;chr&gt; &quot;Seat belt not used properly as required&quot;, &quot;Careless…
#&gt; $ officer_id        &lt;chr&gt; &quot;J042&quot;, &quot;B026&quot;, &quot;M009&quot;, &quot;K035&quot;, &quot;D028&quot;, &quot;K023&quot;, &quot;K03…
#&gt; $ id_column         &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 1…</code></pre>
<p>Alternatively, we can also add a new column adding the new column name after the <code>$</code> sign then assigning the value, like below. <strong>Note that this will change the original data frame, which you may not always want to do.</strong></p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="data.html#cb121-1" tabindex="-1"></a>stops<span class="sc">$</span>row_numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(stops))</span>
<span id="cb121-2"><a href="data.html#cb121-2" tabindex="-1"></a>stops<span class="sc">$</span>all_false <span class="ot">&lt;-</span> <span class="cn">FALSE</span>  <span class="co"># what do you think will happen here?</span></span></code></pre></div>
<p>There is an equivalent function, <code>rbind()</code> to add a new row to a data frame. I use this far less frequently than the column equivalent. The one thing to keep in mind is that the row to be added to the data frame needs to match the order and type of columns in the data frame. Remember that R’s way to store multiple different data types in one object is a <code>list</code>. So if we wanted to add a new row to <code>stops</code> we would say:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="data.html#cb122-1" tabindex="-1"></a>new_row <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id=</span><span class="st">&quot;MS-2017-12345&quot;</span>, <span class="at">state=</span><span class="st">&quot;MS&quot;</span>, <span class="at">stop_date=</span><span class="st">&quot;2017-08-24&quot;</span>,</span>
<span id="cb122-2"><a href="data.html#cb122-2" tabindex="-1"></a>                <span class="at">county_name=</span><span class="st">&quot;Tallahatchie County&quot;</span>, <span class="at">county_fips=</span><span class="dv">12345</span>,</span>
<span id="cb122-3"><a href="data.html#cb122-3" tabindex="-1"></a>                <span class="at">police_department=</span><span class="st">&quot;MSHP&quot;</span>, <span class="at">driver_gender=</span><span class="st">&quot;F&quot;</span>, <span class="at">driver_birthdate=</span><span class="st">&quot;1999-06-14&quot;</span>,</span>
<span id="cb122-4"><a href="data.html#cb122-4" tabindex="-1"></a>                <span class="at">driver_race=</span><span class="st">&quot;Hispanic&quot;</span>, <span class="at">violation_raw=</span><span class="st">&quot;Speeding&quot;</span>, <span class="at">officer_id=</span><span class="st">&quot;ABCD&quot;</span>)</span>
<span id="cb122-5"><a href="data.html#cb122-5" tabindex="-1"></a></span>
<span id="cb122-6"><a href="data.html#cb122-6" tabindex="-1"></a>stops_withnewrow <span class="ot">&lt;-</span> <span class="fu">rbind</span>(stops, new_row)</span>
<span id="cb122-7"><a href="data.html#cb122-7" tabindex="-1"></a><span class="fu">tail</span>(stops_withnewrow)</span></code></pre></div>
<pre><code>#&gt; # A tibble: 6 × 11
#&gt;   id    state stop_date  county_name county_fips police_department driver_gender
#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;date&gt;     &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;        
#&gt; 1 MS-2… MS    2016-07-09 George Cou…       28039 Mississippi High… M            
#&gt; 2 MS-2… MS    2016-07-10 Copiah Cou…       28029 Mississippi High… M            
#&gt; 3 MS-2… MS    2016-07-11 Grenada Co…       28043 Mississippi High… M            
#&gt; 4 MS-2… MS    2016-07-14 Copiah Cou…       28029 Mississippi High… F            
#&gt; 5 MS-2… MS    2016-07-14 Copiah Cou…       28029 Mississippi High… M            
#&gt; 6 MS-2… MS    2017-08-24 Tallahatch…       12345 MSHP              F            
#&gt; # ℹ 4 more variables: driver_birthdate &lt;date&gt;, driver_race &lt;chr&gt;,
#&gt; #   violation_raw &lt;chr&gt;, officer_id &lt;chr&gt;</code></pre>
<p>Equivalently there is a <code>bind_rows</code> function available in <code>tidyverse</code>. One of the main reasons for using <code>bind_rows</code> over <code>rbind</code> is to combine two data frames having different number of columns. <code>rbind</code> throws an error in such a case whereas <code>bind_rows</code> assigns “NA” to those rows of columns missing in one of the data frames where the value is not provided by the data frames. <a href="https://stackoverflow.com/a/59482527">Here is a systematic review of differences between the two.</a></p>
<p>There is also <code>add_row</code> fro the <code>tibble</code> package which allows you to specify where to insert the row. You can find out more with <code>?add_row</code>.</p>
<p>A convenient function to know about is <code>na.omit()</code>. It will remove all rows from a data frame that have at least one column with <code>NA</code> values. The function <code>drop_na()</code> from <code>tidyverse</code> works similarly and lets you name specific columns with NA.</p>
<blockquote>
<h3>
Challenge
</h3>
<ul>
<li>Given the following data frame:</li>
</ul>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="data.html#cb124-1" tabindex="-1"></a>dfr <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">col_1 =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>), </span>
<span id="cb124-2"><a href="data.html#cb124-2" tabindex="-1"></a>                  <span class="at">col_2 =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">&quot;b&quot;</span>), </span>
<span id="cb124-3"><a href="data.html#cb124-3" tabindex="-1"></a>                  <span class="at">col_3 =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">NA</span>, <span class="cn">FALSE</span>))</span></code></pre></div>
<p>What would you expect the following commands to return?</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="data.html#cb125-1" tabindex="-1"></a><span class="fu">nrow</span>(dfr)</span>
<span id="cb125-2"><a href="data.html#cb125-2" tabindex="-1"></a><span class="fu">nrow</span>(<span class="fu">na.omit</span>(dfr))</span></code></pre></div>
</blockquote>
<!---

```r
## Answers
nrow(dfr) # 3
nrow(na.omit(dfr)) # 1
```
--->
</div>
<div id="categorical-data-factors" class="section level2 hasAnchor" number="3.6">
<h2><span class="header-section-number">3.6</span> Categorical data: Factors<a href="data.html#categorical-data-factors" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Factors are very useful and are actually
something that make R particularly well suited to working with data, so we’re
going to spend a little time introducing them.</p>
<p>Factors are used to represent categorical data. Factors can be ordered or
unordered, and understanding them is necessary for statistical analysis and for
plotting.</p>
<p>Factors are stored as integers, and have labels (text) associated with these
unique integers. While factors look (and often behave) like character vectors,
they are actually integers under the hood, and you need to be careful when
treating them like strings.</p>
<p>Once created, factors can only contain a pre-defined set of values, known as
<em>levels</em>. By default, R always sorts <em>levels</em> in alphabetical order. For
instance, if you have a factor with 3 levels:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="data.html#cb126-1" tabindex="-1"></a>priority <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;medium&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>))</span></code></pre></div>
<p>R will assign <code>1</code> to the level <code>"high"</code> and <code>2</code> to the level <code>"low"</code> and <code>3</code> to the level <code>low</code> (because it orders alphabetically, not according to position in the vector). You can check this by using the function <code>levels()</code>, and check the number of levels using <code>nlevels()</code>:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="data.html#cb127-1" tabindex="-1"></a><span class="fu">levels</span>(priority)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;high&quot;   &quot;low&quot;    &quot;medium&quot;</code></pre>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="data.html#cb129-1" tabindex="-1"></a><span class="fu">nlevels</span>(priority)</span></code></pre></div>
<pre><code>#&gt; [1] 3</code></pre>
<p>Sometimes, the order of the factors does not matter, other times you might want
to specify the order because it is meaningful (e.g., “low”, “medium”, “high”),
it improves your visualization, or it is required by a particular type of
analysis. Here, one way to reorder our levels in the <code>priority</code> vector would be:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="data.html#cb131-1" tabindex="-1"></a>priority <span class="co"># current order</span></span></code></pre></div>
<pre><code>#&gt; [1] low    high   medium low    high  
#&gt; Levels: high low medium</code></pre>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="data.html#cb133-1" tabindex="-1"></a>priority <span class="ot">&lt;-</span> <span class="fu">factor</span>(priority, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;high&quot;</span>, <span class="st">&quot;medium&quot;</span>, <span class="st">&quot;low&quot;</span>))</span>
<span id="cb133-2"><a href="data.html#cb133-2" tabindex="-1"></a>priority <span class="co"># after re-ordering</span></span></code></pre></div>
<pre><code>#&gt; [1] low    high   medium low    high  
#&gt; Levels: high medium low</code></pre>
<p>In R’s memory, these factors are represented by integers (1, 2, 3), but are more
informative than integers because factors are self describing: <code>"high"</code>,
<code>"medium"</code> and <code>"low"</code> is more descriptive than <code>1</code>, <code>2</code>, <code>3</code>. Which one is “low”? You wouldn’t
be able to tell just from the integer data. Factors, on the other hand, have
this information built in.</p>
<div id="converting-factors" class="section level3 hasAnchor" number="3.6.1">
<h3><span class="header-section-number">3.6.1</span> Converting factors<a href="data.html#converting-factors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you need to convert a factor to a character vector, you use
<code>as.character(x)</code>.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="data.html#cb135-1" tabindex="-1"></a><span class="fu">as.character</span>(priority)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;low&quot;    &quot;high&quot;   &quot;medium&quot; &quot;low&quot;    &quot;high&quot;</code></pre>
<p>It is a little is a little trickier to convert factors where the levels appear as numbers, such or years, for example, to numbers.One method is to
convert factors to characters and then numbers. Another method is to use the <code>levels()</code> function. Compare:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="data.html#cb137-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="dv">1990</span>, <span class="dv">1983</span>, <span class="dv">1977</span>, <span class="dv">1998</span>, <span class="dv">1990</span>))</span>
<span id="cb137-2"><a href="data.html#cb137-2" tabindex="-1"></a><span class="fu">as.numeric</span>(y)               <span class="co"># wrong! and there is no warning...</span></span></code></pre></div>
<pre><code>#&gt; [1] 3 2 1 4 3</code></pre>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="data.html#cb139-1" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">as.character</span>(y)) <span class="co"># works...</span></span></code></pre></div>
<pre><code>#&gt; [1] 1990 1983 1977 1998 1990</code></pre>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="data.html#cb141-1" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">levels</span>(y))[y]    <span class="co"># The recommended way.</span></span></code></pre></div>
<pre><code>#&gt; [1] 1990 1983 1977 1998 1990</code></pre>
<p>Notice that in the <code>levels()</code> approach, three important steps occur:</p>
<ul>
<li>We obtain all the factor levels using <code>levels(y)</code></li>
<li>We convert these levels to numeric values using <code>as.numeric(levels(y))</code></li>
<li>We then access these numeric values using the underlying integers of the vector <code>y</code> as indices inside the square brackets</li>
</ul>
</div>
<div id="renaming-factors" class="section level3 hasAnchor" number="3.6.2">
<h3><span class="header-section-number">3.6.2</span> Renaming factors<a href="data.html#renaming-factors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When your data is stored as a factor, you can use the <code>plot()</code> function to get a quick glance at the number of observations represented by each factor
level. Let’s look at the number of black and white drivers in the <code>stops</code> dataset:</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="data.html#cb143-1" tabindex="-1"></a><span class="co"># We create a new variable with the column &quot;driver_race&quot; as a factor</span></span>
<span id="cb143-2"><a href="data.html#cb143-2" tabindex="-1"></a>race <span class="ot">&lt;-</span> stops<span class="sc">$</span>driver_race</span>
<span id="cb143-3"><a href="data.html#cb143-3" tabindex="-1"></a>race <span class="ot">&lt;-</span> <span class="fu">factor</span>(race)</span>
<span id="cb143-4"><a href="data.html#cb143-4" tabindex="-1"></a><span class="fu">plot</span>(race)</span></code></pre></div>
<p><img src="R-intro_files/figure-html/driver-race-barplot-1.png" width="672" /></p>
<p>This looks good, however, <code>plot</code> silently ignores NAs and we would like to know if there are any:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="data.html#cb144-1" tabindex="-1"></a><span class="co"># We create a new variable with the column &quot;driver_race&quot; as a factor</span></span>
<span id="cb144-2"><a href="data.html#cb144-2" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(race))</span></code></pre></div>
<pre><code>#&gt; [1] 28</code></pre>
<p>There seem to be a number of individuals for which the race information hasn’t been recorded. Additionally, for these individuals, there is no label to indicate that the information is missing. Let’s rename this label to something more meaningful:</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="data.html#cb146-1" tabindex="-1"></a><span class="do">## Let&#39;s recreate the vector from the data frame column driver_race</span></span>
<span id="cb146-2"><a href="data.html#cb146-2" tabindex="-1"></a>race <span class="ot">&lt;-</span> stops<span class="sc">$</span>driver_race</span>
<span id="cb146-3"><a href="data.html#cb146-3" tabindex="-1"></a></span>
<span id="cb146-4"><a href="data.html#cb146-4" tabindex="-1"></a><span class="do">## replace the missing data with &quot;unknown&quot;</span></span>
<span id="cb146-5"><a href="data.html#cb146-5" tabindex="-1"></a>race[<span class="fu">is.na</span>(race)] <span class="ot">&lt;-</span> <span class="st">&#39;Missing&#39;</span></span>
<span id="cb146-6"><a href="data.html#cb146-6" tabindex="-1"></a></span>
<span id="cb146-7"><a href="data.html#cb146-7" tabindex="-1"></a><span class="do">## convert it into a factor</span></span>
<span id="cb146-8"><a href="data.html#cb146-8" tabindex="-1"></a>race <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(race)</span>
<span id="cb146-9"><a href="data.html#cb146-9" tabindex="-1"></a></span>
<span id="cb146-10"><a href="data.html#cb146-10" tabindex="-1"></a><span class="do">## let&#39;s see what it looks like</span></span>
<span id="cb146-11"><a href="data.html#cb146-11" tabindex="-1"></a><span class="fu">plot</span>(race)</span></code></pre></div>
<p><img src="R-intro_files/figure-html/unnamed-chunk-94-1.png" width="672" /></p>
<blockquote>
<h3>
Challenge
</h3>
<ul>
<li>Rename “Black” to “African American”.</li>
<li>Now that we have renamed the factor level to “Missing”, can you recreate the
barplot such that “Missing” is last (to the right)?</li>
</ul>
</blockquote>
<!---

```r
## Answers
levels(race)[2] <- c("African American") # also works without c function
race <- factor(race, levels = c("African American", "White", "Missing"))
plot(race)
```

<img src="R-intro_files/figure-html/correct-order-1.png" width="672" />
--->
</div>
</div>
<div id="date-formats" class="section level2 hasAnchor" number="3.7">
<h2><span class="header-section-number">3.7</span> Date Formats<a href="data.html#date-formats" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>One of the most common issues that new (and experienced!) R users have is converting
date and time information into a variable that is appropriate and usable during
analyses. If you have control over your data it might be useful to ensure that each component of your date is stored as a separate
variable, i.e a separate column for day, month, and year. However, often we do not have control and the date is stored in one single column and with varying order and separating characters between its components.</p>
<p>Using <code>str()</code>, we can see that both dates in our data frame <code>stop_date</code> and <code>driver_birthdate</code> are each stored in one column.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="data.html#cb147-1" tabindex="-1"></a><span class="fu">str</span>(stops)</span></code></pre></div>
<pre><code>#&gt; spc_tbl_ [211,211 × 11] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
#&gt;  $ id               : chr [1:211211] &quot;MS-2013-00001&quot; &quot;MS-2013-00002&quot; &quot;MS-2013-00003&quot; &quot;MS-2013-00004&quot; ...
#&gt;  $ state            : chr [1:211211] &quot;MS&quot; &quot;MS&quot; &quot;MS&quot; &quot;MS&quot; ...
#&gt;  $ stop_date        : Date[1:211211], format: &quot;2013-01-01&quot; &quot;2013-01-01&quot; ...
#&gt;  $ county_name      : chr [1:211211] &quot;Jones County&quot; &quot;Lauderdale County&quot; &quot;Pike County&quot; &quot;Hancock County&quot; ...
#&gt;  $ county_fips      : num [1:211211] 28067 28075 28113 28045 28051 ...
#&gt;  $ police_department: chr [1:211211] &quot;Mississippi Highway Patrol&quot; &quot;Mississippi Highway Patrol&quot; &quot;Mississippi Highway Patrol&quot; &quot;Mississippi Highway Patrol&quot; ...
#&gt;  $ driver_gender    : chr [1:211211] &quot;M&quot; &quot;M&quot; &quot;M&quot; &quot;M&quot; ...
#&gt;  $ driver_birthdate : Date[1:211211], format: &quot;1950-06-14&quot; &quot;1967-04-06&quot; ...
#&gt;  $ driver_race      : chr [1:211211] &quot;Black&quot; &quot;Black&quot; &quot;Black&quot; &quot;White&quot; ...
#&gt;  $ violation_raw    : chr [1:211211] &quot;Seat belt not used properly as required&quot; &quot;Careless driving&quot; &quot;Speeding - Regulated or posted speed limit and actual speed&quot; &quot;Speeding - Regulated or posted speed limit and actual speed&quot; ...
#&gt;  $ officer_id       : chr [1:211211] &quot;J042&quot; &quot;B026&quot; &quot;M009&quot; &quot;K035&quot; ...
#&gt;  - attr(*, &quot;spec&quot;)=
#&gt;   .. cols(
#&gt;   ..   id = col_character(),
#&gt;   ..   state = col_character(),
#&gt;   ..   stop_date = col_date(format = &quot;&quot;),
#&gt;   ..   county_name = col_character(),
#&gt;   ..   county_fips = col_double(),
#&gt;   ..   police_department = col_character(),
#&gt;   ..   driver_gender = col_character(),
#&gt;   ..   driver_birthdate = col_date(format = &quot;&quot;),
#&gt;   ..   driver_race = col_character(),
#&gt;   ..   violation_raw = col_character(),
#&gt;   ..   officer_id = col_character()
#&gt;   .. )
#&gt;  - attr(*, &quot;problems&quot;)=&lt;externalptr&gt;</code></pre>
<p>As an example for how to work with dates let us see if there are seasonal differences in the number of traffic stops.</p>
<p>Start by loading the required package:</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="data.html#cb149-1" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code></pre></div>
<p><code>read_csv()</code> has already recognized the Date format of the column when we read the table in earlier.</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="data.html#cb150-1" tabindex="-1"></a>stop_date <span class="ot">&lt;-</span> stops<span class="sc">$</span>stop_date</span>
<span id="cb150-2"><a href="data.html#cb150-2" tabindex="-1"></a><span class="fu">str</span>(stop_date) <span class="co"># notice the &#39;Date&#39; class</span></span></code></pre></div>
<pre><code>#&gt;  Date[1:211211], format: &quot;2013-01-01&quot; &quot;2013-01-01&quot; &quot;2013-01-01&quot; &quot;2013-01-01&quot; &quot;2013-01-01&quot; ...</code></pre>
<p>We can now take advantage of different functions to extract year, month, and day of the month, and weekday: <code>year()</code>, <code>month()</code>, <code>day()</code>, <code>wday()</code> like so:</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="data.html#cb152-1" tabindex="-1"></a>stop_month <span class="ot">&lt;-</span> <span class="fu">month</span>(stop_date) <span class="co"># extract the month</span></span>
<span id="cb152-2"><a href="data.html#cb152-2" tabindex="-1"></a></span>
<span id="cb152-3"><a href="data.html#cb152-3" tabindex="-1"></a><span class="co"># convert year to factor to plot</span></span>
<span id="cb152-4"><a href="data.html#cb152-4" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">factor</span>(stop_month)) </span></code></pre></div>
<p><img src="R-intro_files/figure-html/yearly-stops-1.png" width="672" /></p>
<p>If your dates are not in Date format, you can use the <code>ymd()</code> function from the package <strong><code>lubridate</code></strong>. This
function is designed to take a vector representing year, month, and day and convert
that information to a POSIXct vector. POSIXct is a class of data recognized by R as
being a date or date and time. The argument that the function requires is relatively
flexible, but, as a best practice, is a character vector formatted as “YYYY-MM-DD”.</p>
<blockquote>
<h3>
Challenge
</h3>
<ul>
<li><p>Are there more stops in certain days of the week?</p></li>
<li><p>Determine the age of the driver in years (approximate) at the time of the stop:</p></li>
<li><p>Extract <code>driver_birthdate</code> into a vector <code>birth_date</code></p></li>
<li><p>Create a new vector <code>age</code> with the driver’s age at the time of the stop in years</p></li>
<li><p>Coerce <code>age</code> to a factor and use the <code>plot</code> function to check your results. What do you find?</p></li>
</ul>
</blockquote>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="gettingstarted.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/cengel/R-intro/edit/master/03-working-with-data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R-intro.pdf", "R-intro.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
